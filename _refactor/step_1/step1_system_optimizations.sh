# ========================
# –®–∞–≥ 1: –°–∏—Å—Ç–µ–º–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ Raspberry Pi 5
# ========================

echo "üîß === –°–ò–°–¢–ï–ú–ù–´–ï –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ò RPi5 ==="

# 1. –ü—Ä–æ–≤–µ—Ä–∏–º —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
echo "üìä –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:"
vcgencmd version
vcgencmd measure_temp
vcgencmd get_mem gpu
vcgencmd measure_clock arm

# 2. –ö–†–ò–¢–ò–ß–ù–û: –û–±–Ω–æ–≤–ª—è–µ–º firmware —Å SDRAM –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è–º–∏ 
echo "üöÄ –û–±–Ω–æ–≤–ª—è–µ–º firmware..."
sudo rpi-update
echo "‚ö†Ô∏è  –¢–†–ï–ë–£–ï–¢–°–Ø –ü–ï–†–ï–ó–ê–ì–†–£–ó–ö–ê –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è!"

# 3. –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ–º GPU –ø–∞–º—è—Ç—å (–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏)
echo "üéÆ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º GPU –ø–∞–º—è—Ç—å..."
sudo raspi-config nonint do_memory_split 128

# 4. –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ X11 –≤–º–µ—Å—Ç–æ Wayland –¥–ª—è –ª—É—á—à–µ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å Kivy
echo "üñ•Ô∏è  –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ X11..."
sudo raspi-config nonint do_wayland W1  # W1 = X11

# 5. –î–æ–±–∞–≤–ª—è–µ–º –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –≤ config.txt
echo "‚öôÔ∏è  –î–æ–±–∞–≤–ª—è–µ–º –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –≤ config.txt..."
sudo tee -a /boot/firmware/config.txt << 'EOF'

# === BEDROCK PERFORMANCE OPTIMIZATIONS ===
# GPU Memory –¥–ª—è Kivy
gpu_mem=128

# SDRAM –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (–Ω–æ–≤—ã–µ –≤ 2024-2025)
sdram_freq=800
over_voltage=2

# Boost –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
arm_boost=1
temp_limit=80

# I2C –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –¥–ª—è –¥–∞—Ç—á–∏–∫–æ–≤
dtparam=i2c_arm_baudrate=400000

# GPIO –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
gpio=2-27=op,pu  # Pull-up –¥–ª—è –≤—Å–µ—Ö GPIO
EOF

echo "‚úÖ –°–∏—Å—Ç–µ–º–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã"
echo ""
echo "üîÑ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò:"
echo "1. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ Pi: sudo reboot"
echo "2. –ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥–æ–π:"
echo "   bash check_system.sh"
echo "3. –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –∫ –®–∞–≥—É 2"